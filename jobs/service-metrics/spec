---
name: service-metrics

templates:
  service_metrics_ctl.erb: bin/service_metrics_ctl
  syslog_forwarder.conf.erb: config/syslog_forwarder.conf

packages:
- utils
- go
- service-metrics

properties:
  service_metrics.origin:
    description: "Used when initialising dropsonde. Should be set to something descriptive of the deployment (e.g. p-redis)"
  service_metrics.metrics_command:
    description: "Command to obtain metrics in JSON format"
  service_metrics.metrics_command_args:
    description: "Arguments to be passed to the metrics command (see service_metrics.metrics_command)"
    default: []
  service_metrics.execution_interval_seconds:
    description: "Interval to repeatedly obtain and emit metrics, in seconds"
    default: 60
  service_metrics.debug:
    description: "boolean value to turn on verbose mode"
    default: false

  syslog_daemon_config.address:
    description: "IP address for syslog aggregator"
  syslog_daemon_config.port:
    description: "TCP port of syslog aggregator"
  syslog_daemon_config.transport:
    description: "Transport to be used when forwarding logs (tcp|udp|relp)."
    default: "tcp"

  metron_agent.dropsonde_incoming_port:
    description: "Incoming port for dropsonde log messages"
    default: 3457

  nats.user:
    description: "Username for cc client to connect to NATS"
  nats.password:
    description: "Password for cc client to connect to NATS"
  nats.machines:
    description: "IP addresses of Cloud Foundry NATS servers"
  nats.port:
    description: "IP port of Cloud Foundry NATS server"

  etcd.machines:
    description: "IPs pointing to the ETCD cluster"
  etcd.maxconcurrentrequests:
    description: "Number of concurrent requests to ETCD"
    default: 10
